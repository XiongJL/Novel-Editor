---
description: 结束任务时调用，更新项目记忆、任务状态和开发日志
---

# 更新项目记忆 (Update Memory)

此工作流用于在完成一个重要任务 (Task) 或会话即将结束时，系统化地整理和记录项目状态、习得的知识以及下一步计划。

## 1. 触发时机
- 完成了一个复杂的 Bug 修复。
- 完成了一个功能模块的开发。
- 用户显式要求 "记录一下" 或 "更新记忆"。
- 准备结束当前会话前。

## 2. 执行步骤

### 第一步：审查当前进展
- 回顾本次会话或任务中修改了哪些文件。
- 确认 `active_task.md` 中哪些任务项已完成，将其标记为 `[x]`。

### 第二步：提取关键信息
思考以下问题：
1.  **踩坑记录**: 是否遇到了意料之外的错误？是如何解决的？(例如环境配置、API 变更、依赖冲突)
2.  **架构决策**: 是否做出了影响项目结构的决定？(例如新增了表字段、修改了通信协议)
3.  **遗留问题**: 还有哪些已知 bug 或未完成的边缘情况？

### 第三步：更新 `MEMORY.md`
打开 `.agent/MEMORY.md` 并更新相应板块：
- **📅 最新状态**: 更新 "最近更新时间" 和 "当前焦点"。
- **🐛 踩坑与解决方案**: 追加新的问题和解法。
- **🏛️ 关键架构决策**: 追加新的设计决策。
- **📝 长期待办**: 如果发现了由于时间原因无法立即修复的问题，添加到此列表。

### 第四步：更新 `active_task.md`
- 确保任务列表反映了最新的完成情况。
- 如果有新生成的子任务，添加到列表中。

## 推荐对 AI 说的话 (Prompt Example)
"任务完成了，请运行 /update-memory 更新一下项目记忆。"
